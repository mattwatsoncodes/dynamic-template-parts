(()=>{var e={20:(e,t,a)=>{"use strict";var r=a(609),n=Symbol.for("react.element"),l=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,a){var r,s={},c=null,p=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(p=t.ref),t)l.call(t,r)&&!o.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:p,props:s,_owner:i.current}}},848:(e,t,a)=>{"use strict";e.exports=a(20)},609:e=>{"use strict";e.exports=window.React},942:(e,t)=>{var a;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=i(e,l(a)))}return e}function l(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=i(t,a));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.hooks,t=window.wp.plugins;var r=a(609),n=a(942),l=a.n(n);const i=window.wp.blockEditor,o=window.wp.blocks,s=window.wp.components,c=window.wp.coreData,p=window.wp.element,m=window.wp.i18n,d=window.wp.data,u=window.wp.editor,w=window.wp.primitives;var y=a(848);const h=(0,y.jsx)(w.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,y.jsx)(w.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),_=(0,m.__)("Dynamic Template Parts","dynamic-template-parts");"site-editor-php"===window.adminpage?((0,e.addFilter)("blocks.registerBlockType","dynamic-template-parts/dynamic-template-parts-attributes",(e=>{const{attributes:t,name:a}=e;return"core/template-part"!==a?e:{...e,attributes:{...t,isSwitchable:{type:"boolean",default:!1},limitSwitchableParts:{type:"boolean",default:!1},limitedSwitchableParts:{type:"array",default:[]},useArea:{type:"boolean",default:!1}}}})),(0,e.addFilter)("editor.BlockEdit","dynamic-template-parts/dynamic-template-parts-controls",(function(e){return t=>{const{attributes:{area:a,isSwitchable:n,limitSwitchableParts:d,limitedSwitchableParts:u=[],slug:w,theme:y,useArea:h},isSelected:_,name:v,setAttributes:b}=t;if("core/template-part"!==v||!_)return(0,r.createElement)(e,{...t});const f=`${y}//${w}`,{records:g=[],hasResolved:E}=(0,c.useEntityRecords)("postType","wp_template_part"),P=(0,p.useMemo)((()=>{const e=h?g:g?.filter((e=>e.area===a));return e?.sort(((e,t)=>e.title.raw.localeCompare(t.title.raw)))}),[g,a,h]),k=(0,p.useMemo)((()=>{const e={};return P?.forEach((t=>{const{theme:a,slug:n}=t,l=(0,o.createBlock)("core/template-part",{slug:n,theme:a});e[t.id]=(0,r.createElement)(i.BlockPreview,{blocks:[l],viewportWidth:300})})),e}),[P]);return E?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(e,{...t}),(0,r.createElement)(i.InspectorControls,null,(0,r.createElement)(s.PanelBody,{title:(0,m.__)("Dynamic Template Part","dynamic-template-parts")},(0,r.createElement)(s.ToggleControl,{checked:n,help:(0,m.__)("Allow this template part to be replaced by others.","dynamic-template-parts"),label:(0,m.__)("Enable","dynamic-template-parts"),onChange:e=>b({isSwitchable:e})}),n&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.ToggleControl,{checked:h,help:(0,m.__)("Enable to allow replacement with any type.","dynamic-template-parts"),label:(0,m.__)("Allow Replacement with Any Template Part","dynamic-template-parts"),onChange:e=>b({useArea:e})}),(0,r.createElement)(s.ToggleControl,{checked:d,label:(0,m.__)("Replace with Selected Template Parts","dynamic-template-parts"),help:(0,m.__)("Choose template parts that can replace this one.","dynamic-template-parts"),onChange:e=>b({limitSwitchableParts:e,limitedSwitchableParts:[]})}),d&&(0,r.createElement)("div",{className:"components-checkbox-control-list"},P.map((e=>{const t=k[e.id],a=e.id===f,n=u.includes(e.id)||a,i=l()("dynamic-template-parts-preview",{"dynamic-template-parts-preview--selected":n,"dynamic-template-parts-preview--disabled":a});return(0,r.createElement)(s.Disabled,{isDisabled:a,key:e.id},(0,r.createElement)("label",{className:i,htmlFor:e.id},(0,r.createElement)("input",{type:"checkbox",checked:n,className:"dynamic-template-parts-preview__input",id:e.id,name:e.id,onChange:t=>((e,t,a,r)=>{r({limitedSwitchableParts:e?[...a,t]:a?.filter((e=>e!==t))})})(t.target.checked,e.id,u,b)}),(0,r.createElement)("div",{className:"dynamic-template-parts-preview__preview"},(0,r.createElement)("span",{className:"dynamic-template-parts-preview__title"},((e,t)=>{const a=e.title.raw,r={heading:(0,m.__)("Heading","dynamic-template-parts"),footer:(0,m.__)("Footer","dynamic-template-parts")}[e.area]||(0,m.__)("Generic","dynamic-template-parts");return`${a} (${(0,m.__)("Area:","dynamic-template-parts")} ${r})${e.id===t?` (${(0,m.__)("This Template Part","dynamic-template-parts")})`:""}`})(e,f)),t)))}))))))):(0,r.createElement)(e,{...t})}}))):(0,t.registerPlugin)("dynamic-template-parts",{icon:h,render:()=>{const{DynamicTemplatePartsKey:e,DynamicTemplatePartsOptions:t}=dynamicTemplateParts,{editPost:a}=(0,d.useDispatch)("core/editor"),n=(0,d.useSelect)((e=>e("core/editor").getEditedPostAttribute("meta"))),c=n?.[e]||[],{blockPreviews:w,templateParts:y}=(0,p.useMemo)((()=>{const e={},a=Object.entries(t).reduce(((t,[a,n])=>{const l=n.options.map((t=>{const[a,n]=t.id.split("//"),l=(0,o.createBlock)("core/template-part",{slug:n,theme:a});return e[t.id]=(0,r.createElement)(i.BlockPreview,{blocks:[l],viewportWidth:300}),t}));return t[a]={...n,options:l},t}),{});return{blockPreviews:e,templateParts:a}}),[t]);return y&&Object.keys(y).length&&Object.values(y).some((e=>e.options.length>1))?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(u.PluginSidebarMoreMenuItem,{target:"dynamic-template-parts"},_),(0,r.createElement)(u.PluginSidebar,{name:"dynamic-template-parts",title:_},Object.entries(y).map((([t,n])=>n.options.length<2?null:(0,r.createElement)(s.Panel,{key:t},(0,r.createElement)(s.PanelBody,{title:n.title},(0,r.createElement)(s.BaseControl,{help:(0,m.__)("Select a template part to display instead of '%s'.","dynamic-template-parts").replace("%s",n.title)}),n.options.map((i=>{const o=((e,t,a,r)=>a?.[e]?.id===t||t===r||!a?.[e]&&t===r)(t,i.id,c,n.options.find((e=>e.default))?.id),s=l()("dynamic-template-parts-preview",{"dynamic-template-parts-preview--selected":o});return(0,r.createElement)("label",{className:s,htmlFor:`${t}//${i.id}`,key:`${t}//${i.id}`},(0,r.createElement)("input",{checked:o,className:"dynamic-template-parts-preview__input",id:`${t}//${i.id}`,name:t,type:"radio",value:i.id,onChange:r=>{const l=((e,t,a,r)=>{const n={...r},l=a.find((t=>t.id===e));return l.id===t?delete n[t]:n[t]={...l},n})(r.target.value,t,n.options,c);a({meta:{[e]:l}})}}),(0,r.createElement)("div",{className:"dynamic-template-parts-preview__preview"},(0,r.createElement)("span",{className:"dynamic-template-parts-preview__title"},i.title),w[i.id]))})))))))):null}})})()})();